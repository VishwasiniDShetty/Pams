/****** Object:  Procedure [dbo].[SqlQueryNotificationStoredProcedure-c3870b1e-c4d8-4aa3-86fc-51e3b7833f01]    Committed by VersionSQL https://www.versionsql.com ******/

CREATE PROCEDURE [dbo].[SqlQueryNotificationStoredProcedure-c3870b1e-c4d8-4aa3-86fc-51e3b7833f01] AS BEGIN BEGIN TRANSACTION; RECEIVE TOP(0) conversation_handle FROM [SqlQueryNotificationService-c3870b1e-c4d8-4aa3-86fc-51e3b7833f01]; IF (SELECT COUNT(*) FROM [SqlQueryNotificationService-c3870b1e-c4d8-4aa3-86fc-51e3b7833f01] WHERE message_type_name = 'http://schemas.microsoft.com/SQL/ServiceBroker/DialogTimer') > 0 BEGIN if ((SELECT COUNT(*) FROM sys.services WHERE name = 'SqlQueryNotificationService-c3870b1e-c4d8-4aa3-86fc-51e3b7833f01') > 0)   DROP SERVICE [SqlQueryNotificationService-c3870b1e-c4d8-4aa3-86fc-51e3b7833f01]; if (OBJECT_ID('SqlQueryNotificationService-c3870b1e-c4d8-4aa3-86fc-51e3b7833f01', 'SQ') IS NOT NULL)   DROP QUEUE [SqlQueryNotificationService-c3870b1e-c4d8-4aa3-86fc-51e3b7833f01]; DROP PROCEDURE [SqlQueryNotificationStoredProcedure-c3870b1e-c4d8-4aa3-86fc-51e3b7833f01]; END COMMIT TRANSACTION; END
